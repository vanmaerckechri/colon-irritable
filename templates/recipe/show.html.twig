{% extends 'base.html.twig' %}

{% block title 'Liste les Recettes' %}

{% block body %}
	<div id="main" class="recettePage">
		<div class="showPage maxWidthMain">
			<div class="row">
				<div class="title">
					<h2>{{ recette.titre }}</h2>
				</div>
				<div class="tools">
					<a href="#">
						<img src="{{ '/images/icons/favoris.png' }}" alt="ajouter aux favoris">
					</a>
					<a href="#">
						<img src="{{ '/images/icons/print.png' }}" alt="imprimer">
					</a>
				</div>
			</div>
			<div class="row">
				<div class="col-1">
					{% if recette.image %}
						<img src="{{ vich_uploader_asset(recette, 'imageFile') | imagine_filter('thumb') }}" alt="photo du plat">
					{% else %}
						<img src="{{ '/images/recettes/empty.png' | imagine_filter('thumb') }}" alt="photo du plat">
					{% endif %}
				</div>
				<div class="col-2">
					<div>
						<h3>Type de Plat:</h3>
						<p>{{ recette.recetteType }}</p>
					</div>
					<div>
						<h3>Nombre de Personnes:</h3>
						<p>{{ recette.nbrPers }} personne(s)</p>
					</div>
					<div>
						<h3>Préparation:</h3>
						<p>{{ recette.tempsPrepa|date('H:i')}} minutes</p>
					</div>
					<div>
						<h3>Cuisson:</h3>
						<p>{{ recette.tempsCuisson|date('H:i') }} minutes</p>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-4">
					<div class="ingredientsContainer">
						<h3>Ingrédients</h3>
						{% for ingredient in recette.ingredients %}
							<p>{{ ingredient.contenu }}</p>
						{% endfor %}
					</div>
				</div>
				<div class="col-5">
					<div class="etapesContainer">
						<h3>Préparation</h3>
						{% for etape in recette.etapes %}
							<h4>Etape {{ loop.index }}</h4>
							<p>{{ etape.contenu }}</p>
						{% endfor %}
					</div>
				</div>
				{% if app.user and app.user == recette.user %}
					<a  class="btn validateBtn" href="{{ path('recipe.edit', {id: recette.id, slug: recette.slug}) }}">EDITER</a>
				{% endif %}
			</div>
			<div class="commentaires">
				{% if userAlreadyComment == false %}
					<div class="newCommentContainer">
						<h3>Donnez votre Avis ?</h3>
						<ul class="scoreContainer">
							<input type="radio" id="5-star" name="rating" value="5" />
							<label for="5-star" title="Amazing">
								<span class="unchecked">☆</span>
								<span class="checked">★</span>
							</label>
							<input type="radio" id="4-star" name="rating" value="4" />
							<label for="4-star" title="Good">
								<span class="unchecked">☆</span>
								<span class="checked">★</span>
							</label>
							<input type="radio" id="3-star" name="rating" value="3" />
							<label for="3-star" title="Average">
								<span class="unchecked">☆</span>
								<span class="checked">★</span>
							</label>
							<input type="radio" id="2-star" name="rating" value="2" />
							<label for="2-star" title="Not Good">
								<span class="unchecked">☆</span>
								<span class="checked">★</span>
							</label>
							<input type="radio" id="1-star" name="rating" value="1" />
							<label for="1-star" title="Bad">
								<span class="unchecked">☆</span>
								<span class="checked">★</span>
							</label>
						</ul>
					</div>


					{{ form_start(form, {'attr': {'id': 'commentsForm'}}) }}
						{{ form_rest(form) }}
						<button>ENREGISTRER</button>
					{{ form_end(form) }}
				{% endif %}
				{% if recette.comments is not empty %}
					<h3>Les Avis de la Communauté</h3>
				{% endif %}
				<ul class="communaute">
					{% for comment in recette.comments %}
						<li>
							<p class="auteur">{{ comment.author }}</p>
							<p class="contenu">{{ comment.contenu }}</p>
						</li>
					{% endfor %}
				</ul>
			</div>
		</div>
	</div>
{% endblock %}

{% block javascripts %}{{ encore_entry_script_tags('rememberFieldValue') }}{% endblock %}